<?xml version="1.0" encoding="UTF-8"?>
<FindBugsFilter>
    <!-- Exclude internal representation exposure for IndexSchema getFieldMap -->
    <Match>
        <Class name="com.redis.vl.schema.IndexSchema" />
        <Method name="getFieldMap" />
        <Bug pattern="EI_EXPOSE_REP" />
    </Match>

    <!-- Exclude EI2 warnings for SearchIndex constructors - storing clients is intended behavior -->
    <Match>
        <Class name="com.redis.vl.index.SearchIndex" />
        <Method name="&lt;init&gt;" />
        <Bug pattern="EI_EXPOSE_REP2" />
    </Match>
    
    <!-- Exclude all MS warnings for BaseIntegrationTest - test utility fields can't be final -->
    <Match>
        <Class name="com.redis.vl.BaseIntegrationTest" />
        <Bug pattern="~MS_.*" />
    </Match>

    <!-- Exclude format string warnings for test YAML content -->
    <Match>
        <Class name="com.redis.vl.index.SearchIndexIntegrationTest" />
        <Method name="testSearchIndexFromYaml" />
        <Bug pattern="VA_FORMAT_STRING_USES_NEWLINE" />
    </Match>
    
    <!-- Exclude potential NPE in lambda for SearchIndex load method -->
    <Match>
        <Class name="com.redis.vl.index.SearchIndex" />
        <Method name="load" />
        <Bug pattern="NP_NULL_ON_SOME_PATH" />
    </Match>
    
    <!-- Exclude any lambda-related warnings in SearchIndex -->
    <Match>
        <Class name="~com\.redis\.vl\.index\.SearchIndex\$.*" />
        <Bug pattern="~.*" />
    </Match>

    <!-- Exclude constructor exception for DJLFaceVectorizer - AutoCloseable pattern is safe -->
    <Match>
        <Class name="com.redis.vl.utils.vectorize.DJLFaceVectorizer" />
        <Method name="&lt;init&gt;" />
        <Bug pattern="CT_CONSTRUCTOR_THROW" />
    </Match>

    <!-- Exclude EI warnings for LangChain4J adapter classes - storing infrastructure objects is intended -->
    <Match>
        <Package name="com.redis.vl.langchain4j" />
        <Bug pattern="EI_EXPOSE_REP" />
    </Match>

    <Match>
        <Package name="com.redis.vl.langchain4j" />
        <Bug pattern="EI_EXPOSE_REP2" />
    </Match>

</FindBugsFilter>